!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.scrollnav=e()}(this,function(){var t,e,n,i=function(t){return function(e){return Math.pow(e,t)}},s=function(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}},r=function(t){return function(e){return e<.5?i(t)(2*e)/2:s(t)(2*e-1)/2+.5}},o={linear:r(1),easeInQuad:i(2),easeOutQuad:s(2),easeInOutQuad:r(2),easeInCubic:i(3),easeOutCubic:s(3),easeInOutCubic:r(3),easeInQuart:i(4),easeOutQuart:s(4),easeInOutQuart:r(4),easeInQuint:i(5),easeOutQuint:s(5),easeInOutQuint:r(5)};function a(t,e){return new Promise(function(n,i){if("number"!=typeof t)return i(new Error("First argument must be a number"));if("string"!=typeof(e=e||"linear"))return i(new Error("Second argument must be a string"));var s,r=window.pageYOffset,a=t-r,u=function(t){var e=Math.abs(t/2);return Math.min(Math.max(e,250),1200)}(a),c=20,l=0;!function t(){s=o[e]((l+=c)/u),window.scroll(0,s*a+r),l<u?setTimeout(t,c):n(window.pageYOffset)}()})}function u(t,e){var n=t.getAttribute("href");return"#"===n.charAt(0)&&(n=n.substr(1)),function t(e,n){var i;e.forEach(function(e){e.id===n&&(i=e),e.subSections&&void 0===i&&(i=t(e.subSections,n))});return i}(e,n).offsetTop}function c(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));if("object"!=typeof(e=e||document.body))return Promise.reject(new Error("Second argument must be an object"));var n=e.getBoundingClientRect();return t.getBoundingClientRect().top-n.top}function l(t){return t.forEach(function(t){var e=document.querySelector("#"+t.id);t.offsetTop=c(e),t.subSections.length&&(t.subSections=l(t.subSections))}),t}function f(t){function e(){var e=window.scrollY||window.pageYOffset||document.body.scrollTop,n=e+.4*window.innerHeight,i=function t(e,n,i){var s,r;e.forEach(function(t){t.offsetTop>i?!s&&t.offsetTop<n&&(s=t):s=t}),s&&s.subSections.length&&(r=t(s.subSections,n,i))&&(s=r);return s}(t.data,e,n);return t.activeSection=i,function(t,e){var n=e.querySelector("[data-sn-active]");if(t){var i=e.querySelector("[data-sn-section="+t.id+"]");i&&i!==n&&(n&&(n.classList.remove("scroll-nav__item--active"),n.removeAttribute("data-sn-active")),i.classList.add("scroll-nav__item--active"),i.setAttribute("data-sn-active",!0))}else n&&(n.classList.remove("scroll-nav__item--active"),n.removeAttribute("data-sn-active"))}(i,t.nav),i}return window.addEventListener("scroll",e),e}function d(t){var e=document.createElement("nav");return e.className="scroll-nav",e.innerHTML=function t(e,n){void 0===n&&(n=!1);var i="scroll-nav"+(n?"__sub-":"__"),s="\n    "+e.map(function(e){return'<li class="'+i+'item" data-sn-section="'+e.id+'">\n            <a class="'+i+'link" href="#'+e.id+'">'+e.text+"</a>\n            "+(e.subSections&&e.subSections.length?""+t(e.subSections,!0):"")+"\n          </li>"}).join("")+"\n  ";return'\n    <ol class="'+i+'list">\n      '+s+"\n    </ol>\n  "}(t),e}function h(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}function g(t,e,n){void 0===n&&(n="scroll-nav");var i=[];return n+="__",t.forEach(function(t,s){var r=[],o=function(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));var n=t.id;if(!n){if("string"!=typeof e)return Promise.reject(new Error("Second argument must be a string"));t.id=n=e}return n}(t,n+(s+1));e.subSections&&t.matches(e.sections)&&(r=g(function(t,e,n){var i=[];for(t=t.nextElementSibling;t&&!t.matches(e);)!n||t.matches(n)?(i.push(t),t=t.nextElementSibling):t=t.nextElementSibling;return i}(t,e.sections,e.subSections),e,o));i.push({id:o,text:t.innerText||t.textContent,offsetTop:c(t),subSections:r})}),i}function v(t){return t instanceof Element}return{init:function(i,s){if(this.settings=h({sections:"h2",insertTarget:i,insertLocation:"before",easingStyle:"easeOutQuad",updateHistory:!0},s),v(i))if(!this.settings.insertTarget||v(this.settings.insertTarget))if(["append","prepend","after","before"].includes(this.settings.insertLocation)){var r,o,c,b,p=i.querySelectorAll(this.settings.sections);if(p.length)return this.data=g(p,this.settings),this.nav=d(this.data),o=(r=this).settings.insertTarget,"append"===(c=r.settings.insertLocation)?o.appendChild(r.nav):"prepend"===c?o.insertBefore(r.nav,o.firstChild):"before"===c?o.parentNode.insertBefore(r.nav,o):"after"===c&&o.parentNode.insertBefore(r.nav,o.nextSibling),t=function(t){var e=t.settings;function n(n){n.preventDefault();var i=.39*window.innerHeight;return a(u(n.target,t.data)-i,e.easingStyle).then(function(){e.updateHistory&&history.replaceState({},"",n.target.getAttribute("href")),e.onScroll&&e.onScroll()})}return t.nav.querySelectorAll("a").forEach(function(t){t.addEventListener("click",n)}),n}(this),e=f(this),n=function(t){function e(){t.data=l(t.data)}return window.addEventListener("resize",e),e}(this),this.settings.debug&&((b=document.createElement("div")).className="snDebugger",b.setAttribute("style","\n      position: fixed;\n      top: 40%;\n      height: 0px;\n      border-bottom:5px solid red;\n      border-top: 5px solid blue;\n      width: 100%;\n      opacity: .5;\n      pointer-events: none;\n    "),document.body.appendChild(b)),this.settings.onInit?this.settings.onInit():this;this.settings.debug&&console.error('\n        scrollnav build failed, could not find any "'+this.settings.sections+'"\n        elements inside of "'+i+'"\n      ')}else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertLocation "'+this.settings.insertLocation+'" is not a valid option\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertTarget "'+i+'" is not an HTML Element\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, content argument "'+i+'" is not an HTML Element\n      ')},destroy:function(i){if(this.settings=h(this.settings,i),function(t,e){t.querySelectorAll("a").forEach(function(t){t.removeEventListener("click",e)})}(this.nav,t),function(t){window.removeEventListener("scroll",t)}(e),function(t){window.removeEventListener("resize",t)}(n),this.nav.remove(),this.settings.onDestroy)return this.settings.onDestroy()},updatePositions:function(t){if(this.settings=h(this.settings,t),this.data=l(this.data),this.settings.onUpdatePositions)return this.settings.onUpdatePositions()}}});
//# sourceMappingURL=scrollnav.min.umd.js.map
